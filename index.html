<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bored</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6117529761188568"
     crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>Feeling bored? Click the button below to find a fun activity.</h1>
        <button class="btn" id="button">Get Activity ðŸ˜ƒ</button>
        <div class="section" id="activity-section">
            <h2>Activity</h2>
            <p id="activity"></p>
        </div>
        <div class="section" id="type-section">
            <h2>Type</h2>
            <p id="type"></p>
        </div>
        <div class="section" id="participants-section">
            <h2>Participants</h2>
            <p id="participants"></p>
        </div>
        <div class="section" id="accessibility-section">
            <h2>Accessibility</h2>
            <p id="accessibility"></p>
        </div>

        <div class="section">
            <h2>Submit Your Link</h2>
            <form id="link-form">
                <input type="url" id="link" placeholder="Enter a link" required>
                <button type="submit" class="btn">Submit Link</button>
            </form>
        </div>

        <div class="section">
            <h2>Random Link</h2>
            <button class="btn" id="random-button">Show Random Link</button>
            <p id="random-link"></p>
        </div>
    </div>

    <script>
        const button = document.getElementById('button');
        const activityElement = document.getElementById('activity');
        const typeElement = document.getElementById('type');
        const participantsElement = document.getElementById('participants');
        const accessibilityElement = document.getElementById('accessibility');
        const form = document.getElementById('link-form');
        const linkInput = document.getElementById('link');
        const randomButton = document.getElementById('random-button');
        const randomLinkElement = document.getElementById('random-link');

        function fetchActivity() {
            fetch('https://www.boredapi.com/api/activity/')
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                    activityElement.innerHTML = data.activity;
                    typeElement.innerHTML = data.type;
                    participantsElement.innerHTML = data.participants;
                    accessibilityElement.innerHTML = data.accessibility;
                })
                .catch(error => {
                    console.log(error);
                    activityElement.innerHTML = 'Failed to fetch activity.';
                });
        }

        function showRandomLink() {
            fetch('links.json')
                .then(res => res.json())
                .then(data => {
                    if (data.length > 0) {
                        const randomIndex = Math.floor(Math.random() * data.length);
                        randomLinkElement.innerHTML = `<a href="${data[randomIndex]}" target="_blank">${data[randomIndex]}</a>`;
                    } else {
                        randomLinkElement.innerHTML = 'No links available.';
                    }
                })
                .catch(error => {
                    console.log(error);
                    randomLinkElement.innerHTML = 'Failed to fetch links.';
                });
        }

        function submitLink(event) {
            event.preventDefault();
            const newLink = linkInput.value;

            fetch('saveLink.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ link: newLink })
            })
            .then(res => res.json())
            .then(data => {
                linkInput.value = '';
                alert('Link submitted successfully!');
            })
            .catch(error => {
                console.log(error);
                alert('Failed to submit link.');
            });
        }

        button.addEventListener('click', fetchActivity);
        randomButton.addEventListener('click', showRandomLink);
        form.addEventListener('submit', submitLink);
    </script>
</body>

</html>
